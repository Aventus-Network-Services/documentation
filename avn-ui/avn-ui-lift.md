# Lift Page

## Summary

This page allows users to lift tokens from tier1 to tier2. Lift is a cross chain operation and requires interacting with Ethereum and AvN so the page is split into 2 sections

## Tier1 - Ethereum

In order to lift tokens, users have to lock their tokens in a special smart contract (AvN contract). The AvN contract supports 2 types of tokens ERC20 and ERC777. The current implementation only support ERC20 tokens, which requires 2 tier1 transactions to lock:
  - Approve the transfer of tokens from the ERC20 contract to the AvN contract
  - Lock the approved tokens in the AvN contract.

### Specifying a Tier1 transaction sender (msg.sender)

This page allows you to specify who the sender should be when sending transactions on tier1. There are 2 different ways this can be accomplished:
  - Using Metamask or
  - Using address and private key

#### Using Metamask - default setting

Metamask is the default setup, and when a user lands on this page Metamask will automatically pop-up and ask permission to be linked to this page. If Metamask is not installed the page will show an error in the console.

If Metamask is installed and logged in, the user will be prompted to choose an account to interact with this page. If its not logged in, the user will be asked to log in.

Once logged in and linked to an account, the `User ethereum address` field will be populated with the address of the selected user and the `User token balance` will also be updated to show the tier1 token balance of the user.

The `Contract token balance` shows the amount of tokens locked up in the AvN contract on tier1 and the `AvN tier1 contract address`, as the name suggests, shows the address of the AvN contract on Rinkeby.

#### Using address and private key

To use this setting:
  - Click on the `use private key` toggle button
  - Specify the user address in `User ethereum address` and
  - Specify the corresponding private key in `Private key for user address`

The `User token balance` will automatically update when a valid address is specified.

### Lifting on tier1 (Ethereum)

Once a user is selected, the second step is to send the transactions to lift. For this a user has to specify:
  - The tier2 recipient of the lifted tokens (`Tier2 recipient public key`): This must be a hex encoded 32 byte public key. ex: `0x322060a8ef38d23ecef28cc34b8e98d1013b471e4efac121218e21cbd3a9d109`
  - The token address that is being lifted (`token to lift`): The ethereum address of the ERC20 token. ex: `0x82Fea31F3f2bF9E555c9A27Aa4CfAF3ec2468C1e`
  - The amount of tokens lifted (`Amount to lift`): The number of tokens to lift in wei (18 decimal places). ex: `1000000000000000000`

## Lifting on Tier2

When the tokens are locked up on tier1, the smart contract emits an event signalling the successful tier1 lift and any user with AVT can send a transaction to the AvN and lift those tokens to tier2. To send this transaction we need:
  - A tier2 user with AVT (`Lift transaction sender`): The user who will pay AVT to send the lift transaction
  - The ethereum transaction hash that corresponds to the lift (`Ethereum transaction hash`): This fiel is read-only by default and will be automatically populated when tier1 processes the lift.

## Resuming a lift

To just send an AvN transaction for an existing tier1 lift, a user can:
  - Click on the `AvN lift only` toggle button
  - Specify a sender (`Lift transaction sender`)
  - Specify a valid ethereum transaction hash (`Ethereum transaction hash`) and click on `Lock tokens on Ethereum and lift to Tier2` button

## Tracking progress

The `Lift progress` field will display the logs generated by the lift page. When a lift transaction has been added to the AvN on tier2, the `Pending events` field will be populated with details of the lift transaction including the block number it will be executed on. This field will be cleared automatically when the lift is executed.
