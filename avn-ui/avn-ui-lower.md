# Lower Page

## Summary

This page allows users to transfer any lifted tokens on tier2. Lowering is a cross chain operation and requires transactions on both tiers.

## Lowering on Tier2

Lowering on tier2 is a transaction that will destroy token from tier2 in order to reclaim them on tier1. To lower on tier2, users need to specify the following:
  - `Sender`: The account that will pay AVT and send the lower transaction on tier2. This account must also be the owner of the tokens being destroyed.
  - `Token`: The Ethereum address of the tokens being lowered
  - `Amount to lower`: The amount of tokens to lower (in wei - 18 decimal places)
  - `Tier1 recipient address`: The Ethereum address of the account that can claim those tokens on tier1. This account must be the sender of the Tier1 lower transaction.
  - `Lower account`: Read-only field automatically populated with a special address that point to a lower account.

## Tier1 - Ethereum

### Specifying a Tier1 transaction sender (msg.sender)

This page allows you to specify who the sender should be when sending transactions on tier1. There are 2 different ways this can be accomplished:
  - Using Metamask or
  - Using address and private key

#### Using Metamask - default setting

Metamask is the default setup, and when a user lands on this page Metamask will automatically pop-up and ask permission to be linked to this page. If Metamask is not installed the page will show an error in the console.

If Metamask is installed and logged in, the user will be prompted to choose an account to interact with this page. If its not logged in, the user will be asked to log in.

Once logged in and linked to an account, the `User ethereum address` field will be populated with the address of the selected user and the `User token balance` will also be updated to show the tier1 token balance of the user.

The `Contract token balance` shows the amount of tokens locked up in the AvN contract on tier1 and the `AvN tier1 contract address`, as the name suggests, shows the address of the AvN contract on Rinkeby.

#### Using address and private key

To use this setting:
  - Click on the `use private key` toggle button
  - Specify the user address in `User ethereum address` and
  - Specify the corresponding private key in `Private key for user address`

The `User token balance` will automatically update when a valid address is specified.

### Lowering on Tier1 (Ethereum)

In order to lower on tier1 the following pre-requisits must be met:
  - Tokens have to be lowered on tier2
  - The lower transaction has to be included in a summary generated on tier2. This summary will include all paying transactions for a given block range.
  - The summary has to be published on Tier1 by calling the `PublishRoot` method of the AvN contract.

Once the above mentioned pre-requisits have been met, users can send a `lower` transaction to tier1 and unlock the tokens. To send a lower transaction users must specify:
  - The ABI encoded leaf: Leaf data that represent a single lower transaction on Tier2. This leaf has an encoded field that Ethereum can decode and understand.
  - Merkle path: The path from this lead to a merkle root that has been previously registerd as part of a `PublishRoot` method call. This will act as proof that the leaf was contained in the merkle tree whose root we have registered previously.

These values can be obtained by calling a public rpc endpoing on any AvN node that allows rpc connections. The `RPC node URL` field should be used to specify the full URL, including port numbers.

## Tracking progress

The `Lower progress` field will display the logs generated by the lower page.
